---
layout:     post
title:      文档流
subtitle:   标准文档流、浮动、脱离文档流、高度塌陷以及BFC
date:       2020-05-26
author:     Lee
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - CSS
---

## 文档流
  - **标准文档流**：从上到下，从左到右的输出文档内容。它由块级元素和行级元素组成，且它们都是盒子模型。
  - 元素在文档流中的特点
    - 块级元素
      - 块元素在文档流中自上向下排列（垂直排列）
      - 块元素在文档流中**默认宽度**是父元素宽度的100%
      - 块元素在文档流中**默认高度**为0，若元素中有内容，则高度为内容的高度
    - 行级元素
      - 行级元素在文档流中自左向右排列，如果在一行中不能容纳所有的元素，则会换到下一行继续自左向右排列
      - 行级元素不能设置宽高，其宽高为内容的宽高

## 浮动
  - 使用 float 属性可以设置元素的浮动，设置了浮动的元素会脱离文档流，向页面的左上或右上移动
  - 可选值
    - none：默认值，元素不浮动，在文档流中排列
    - left：元素向左浮动
    - right：元素向右浮动
  - 当元素脱离文档流以后，它将不会在文档流中占据位置，在文档流中原本在其后的元素将会自动上移
  - 当浮动的元素遇到父元素的边框时会停止移动，如果遇到其他的浮动元素也会停止移动
  - 如果浮动元素的前一个元素是一个没有浮动的块级元素，则浮动元素遇到该元素的下边框也会停止上浮
  - 浮动元素不会浮动到前一个浮动元素的前面，最多在同一行
  - 浮动元素位于文档流的上一层，但是文字会环绕浮动元素

## 脱离文档流
  - 脱离文档流的元素没有行级元素和块级元素之分
  - 块级元素脱离文档流以后不会再独占一行，宽高为内容的宽高，也可以设置宽高
  - 行级元素脱离文档流以后，现象与块级元素脱离文档流一致

## 高度塌陷问题
  - 父元素的高度在不手动设置的情况下，其高度为内容的高度。如果子元素设置浮动，则会脱离文档流，导致父元素高度丢失，也就是高度塌陷问题。父元素一旦高度塌陷，则它后面的元素会向上移动，进而导致整个页面的布局混乱。
  - 高度塌陷问题解决方案
    1. 显示指定父元素高度
      - 缺点：在父元素的高度确实需要由子元素的高度动态决定时，这种方式就不适用了
    2. 开启 BFC

## BFC
  - BFC (Block Formatting Context) 块级格式化环境
  - 独立的块，独立的空间
  - BFC 是元素的**隐含属性**，默认情况下BFC是关闭的，当元素开启BFC后会具有如下特性：
    1. 开启BFC以后，元素可以包含浮动的子元素
    2. 开启BFC以后，子元素的垂直外边距不会传递给父元素
    3. 开启BFC以后，元素不会被浮动的元素所覆盖
  - 程序员不能直接去开启BFC，而需要使用一些特殊的样式来间接的开启元素的BFC
  - 开启BFC的部分方式
    - 设置元素浮动
    - 设置元素的 display 为 inline-block
    - 将元素的 overflow 属性设置为一个非 visible 的值
    - 设置元素绝对定位
  - 注意：不管使用哪种方式开启BFC都会有副作用，实际开发中需要选择一些副作用比较小的方式
  - 示例
    - 开启BFC，解决高度塌陷问题
      - 父元素设置浮动
        - 副作用：父元素脱离文档流
      - 父元素设置 display 为 inline-block
        - 副作用：父元素的默认宽度丢失
      - 父元素设置 overflow 的值为非 visible
        - 通常使用 overflow: hidden
    - 开启BFC，解决子元素垂直外边距传递给父元素的问题
      - 父元素设置 overflow: hidden
    - 开启BFC，解决被 float 元素遮挡问题
      - 被遮挡元素设置 overflow: hidden
